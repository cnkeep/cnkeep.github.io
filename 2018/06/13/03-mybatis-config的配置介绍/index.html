<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="聚沙成塔"><title>mybatis-config的配置介绍 | Mr.Zhang's Blog</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.3"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.3"></script><script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.3"></script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">mybatis-config的配置介绍</h1><a id="logo" href="/.">Mr.Zhang's Blog</a><p class="description">奋斗者~</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><search-result></search-result></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">mybatis-config的配置介绍</h1><div class="post-meta"><a href="/2018/06/13/03-mybatis-config的配置介绍/#comments" class="comment-count"></a><p><span class="date">06月13日, 2018</span><span><a href="/categories/Mybatis/" class="category">Mybatis</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="mybatis-config-xml配置介绍"><a href="#mybatis-config-xml配置介绍" class="headerlink" title="mybatis-config.xml配置介绍"></a>mybatis-config.xml配置介绍</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><blockquote>
<p>mybatis-config.xml作为Mybatis的配置文件，提供了很多配置，而且这些配置存在加载顺序，需要特别注意，这里说明一下:  </p>
<ul>
<li><a href="#properties属性">properties(属性配置节点)</a>  </li>
<li><a href="#settings全局属性">settings (全局配置参数)</a>  </li>
<li><a href="#typeAliases类型别名">typeAiases(类型别名)</a>  </li>
<li><a href="#typeHandlers类型转换器">typeHandlers(类型转换器)</a>  </li>
<li><a href="#objectFactory对象工厂">objectFactory (对象工厂)</a>  </li>
<li><a href="#plugins插件">plugins (插件)</a>  </li>
<li><a href="#environments配置环境">environments (环境集合属性对象)</a>  </li>
<li><a href="#mappers(映射器">mappers(xml映射器)</a>)   </li>
</ul>
</blockquote>
<h3 id="properties属性"><a href="#properties属性" class="headerlink" title="properties属性"></a>properties属性</h3><blockquote>
<p> 将外部配置文件的属性导入，这样就可以在文件内部使用外部配置文件中的属性值了.  </p>
<ul>
<li>例如配置jdbc.properties<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">    jdbc.driver=com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="xml">    jdbc.url=jdbc:mysql://localhost:3306/jdbc</span></span><br><span class="line"><span class="xml">    jdbc.username=root</span></span><br><span class="line"><span class="xml">    jdbc.password=123456</span></span><br><span class="line"><span class="xml">``` </span></span><br><span class="line"><span class="xml">&gt; * 在mybatis-Config.xml中加载db.properties  </span></span><br><span class="line"><span class="xml">```xml</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"db.properties"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!-- properties中还可以配置一些属性名和属性值,此处的优先加载 --&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!-- &lt;property name="driver" value=""/&gt; --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- 和spring整合后 environments配置将废除--&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!-- 使用jdbc事务管理,事务控制由mybatis管理--&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!-- 数据库连接池,由mybatis管理--&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.driver&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.url&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.username&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><blockquote>
<ul>
<li>在 properties元素内定义的属性优先读取。  </li>
<li>然后读取properties元素中resource或url加载的属性，它会覆盖已读取的同名属性。  </li>
<li>最后读取parameterType传递的属性，它会覆盖已读取的同名属性。  </li>
</ul>
</blockquote>
<h3 id="settings全局属性"><a href="#settings全局属性" class="headerlink" title="settings全局属性"></a>settings全局属性</h3><blockquote>
<p>mybatis 运行时可以调整一些参数，比如开启二级缓存  </p>
</blockquote>
<html><br> <head><meta name="generator" content="Hexo 3.8.0"></head><br> <body><br>  <table class="table table-striped" border="0"><br>   <thead><br>    <tr class="a"><br>     <th>设置参数</th><br>     <th>描述</th><br>     <th>有效值</th><br>     <th>默认值</th><br>    </tr><br>   </thead><br>   <tbody><br>    <tr class="b"><br>     <td> cacheEnabled </td><br>     <td> 全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存。即二级缓存 </td><br>     <td> true | false </td><br>     <td> true </td><br>    </tr><br>    <tr class="a"><br>     <td> lazyLoadingEnabled </td><br>     <td> 延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置<tt>fetchType</tt>属性来覆盖该项的开关状态。 </td><br>     <td> true | false </td><br>     <td> false </td><br>    </tr><br>    <tr class="b"><br>     <td> aggressiveLazyLoading </td><br>     <td> 当开启时，任何方法的调用都会加载该对象的所有属性。否则，每个属性会按需加载（参考<tt>lazyLoadTriggerMethods</tt>). </td><br>     <td> true | false </td><br>     <td> false (true in ≤3.4.1) </td><br>    </tr><br>    <tr class="a"><br>     <td> multipleResultSetsEnabled </td><br>     <td> 是否允许单一语句返回多结果集（需要兼容驱动）。 </td><br>     <td> true | false </td><br>     <td> true </td><br>    </tr><br>    <tr class="b"><br>     <td> useColumnLabel </td><br>     <td> 使用列标签代替列名。不同的驱动在这方面会有不同的表现， 具体可参考相关驱动文档或通过测试这两种不同的模式来观察所用驱动的结果。 </td><br>     <td> true | false </td><br>     <td> true </td><br>    </tr><br>    <tr class="a"><br>     <td> useGeneratedKeys </td><br>     <td> 允许 JDBC 支持自动生成主键，需要驱动兼容。 如果设置为 true 则这个设置强制使用自动生成主键，尽管一些驱动不能兼容但仍可正常工作（比如 Derby）。 </td><br>     <td> true | false </td><br>     <td> False </td><br>    </tr><br>    <tr class="b"><br>     <td> autoMappingBehavior </td><br>     <td> 指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示取消自动映射；PARTIAL 只会自动映射没有定义嵌套结果集映射的结果集。 FULL 会自动映射任意复杂的结果集（无论是否嵌套）。 </td><br>     <td> NONE, PARTIAL, FULL </td><br>     <td> PARTIAL </td><br>    </tr><br>    <tr class="a"><br>     <td> autoMappingUnknownColumnBehavior </td><br>     <td> 指定发现自动映射目标未知列（或者未知属性类型）的行为。<br>      <ul><br>       <li><tt>NONE</tt>: 不做任何反应</li><br>       <li><tt>WARNING</tt>: 输出提醒日志 (<tt>‘org.apache.ibatis.session.AutoMappingUnknownColumnBehavior’</tt> 的日志等级必须设置为 <tt>WARN</tt>)</li><br>       <li><tt>FAILING</tt>: 映射失败 (抛出 <tt>SqlSessionException</tt>)</li><br>      </ul> </td><br>     <td> NONE, WARNING, FAILING </td><br>     <td> NONE </td><br>    </tr><br>    <tr class="b"><br>     <td> defaultExecutorType </td><br>     <td> 配置默认的执行器。SIMPLE 就是普通的执行器；REUSE 执行器会重用预处理语句（prepared statements）； BATCH 执行器将重用语句并执行批量更新。 </td><br>     <td> SIMPLE REUSE BATCH </td><br>     <td> SIMPLE </td><br>    </tr><br>    <tr class="a"><br>     <td> defaultStatementTimeout </td><br>     <td> 设置超时时间，它决定驱动等待数据库响应的秒数。 </td><br>     <td> 任意正整数 </td><br>     <td> Not Set (null) </td><br>    </tr><br>    <tr class="b"><br>     <td> defaultFetchSize </td><br>     <td> 为驱动的结果集获取数量（fetchSize）设置一个提示值。此参数只可以在查询设置中被覆盖。 </td><br>     <td> 任意正整数 </td><br>     <td> Not Set (null) </td><br>    </tr><br>    <tr class="a"><br>     <td> safeRowBoundsEnabled </td><br>     <td> 允许在嵌套语句中使用分页（RowBounds）。如果允许使用则设置为false。 </td><br>     <td> true | false </td><br>     <td> False </td><br>    </tr><br>    <tr class="b"><br>     <td> safeResultHandlerEnabled </td><br>     <td> 允许在嵌套语句中使用分页（ResultHandler）。如果允许使用则设置为false。 </td><br>     <td> true | false </td><br>     <td> True </td><br>    </tr><br>    <tr class="a"><br>     <td> mapUnderscoreToCamelCase </td><br>     <td> 是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射。 </td><br>     <td> true | false </td><br>     <td> False </td><br>    </tr><br>    <tr class="b"><br>     <td> localCacheScope </td><br>     <td> MyBatis 利用本地缓存机制（Local Cache）防止循环引用（circular references）和加速重复嵌套查询。 默认值为 SESSION，这种情况下会缓存一个会话中执行的所有查询。 若设置值为 STATEMENT，本地会话仅用在语句执行上，对相同 SqlSession 的不同调用将不会共享数据。 </td><br>     <td> SESSION | STATEMENT </td><br>     <td> SESSION </td><br>    </tr><br>    <tr class="a"><br>     <td> jdbcTypeForNull </td><br>     <td> 当没有为参数提供特定的 JDBC 类型时，为空值指定 JDBC 类型。 某些驱动需要指定列的 JDBC 类型，多数情况直接用一般类型即可，比如 NULL、VARCHAR 或 OTHER。 </td><br>     <td> JdbcType 常量. 大多都为: NULL, VARCHAR and OTHER </td><br>     <td> OTHER </td><br>    </tr><br>    <tr class="b"><br>     <td> lazyLoadTriggerMethods </td><br>     <td> 指定哪个对象的方法触发一次延迟加载。 </td><br>     <td> 用逗号分隔的方法列表。 </td><br>     <td> equals,clone,hashCode,toString </td><br>    </tr><br>    <tr class="a"><br>     <td> defaultScriptingLanguage </td><br>     <td> 指定动态 SQL 生成的默认语言。 </td><br>     <td> 一个类型别名或完全限定类名。 </td><br>     <td> org.apache.ibatis.scripting.xmltags.XMLLanguageDriver </td><br>    </tr><br>    <tr class="b"><br>     <td> defaultEnumTypeHandler </td><br>     <td> 指定 Enum 使用的默认 <tt>TypeHandler</tt> 。 (从3.4.5开始) </td><br>     <td> 一个类型别名或完全限定类名。 </td><br>     <td> org.apache.ibatis.type.EnumTypeHandler </td><br>    </tr><br>    <tr class="a"><br>     <td> callSettersOnNulls </td><br>     <td> 指定当结果集中值为 null 的时候是否调用映射对象的 setter（map 对象时为 put）方法，这对于有 Map.keySet() 依赖或 null 值初始化的时候是有用的。注意基本类型（int、boolean等）是不能设置成 null 的。 </td><br>     <td> true | false </td><br>     <td> false </td><br>    </tr><br>    <tr class="b"><br>     <td> returnInstanceForEmptyRow </td><br>     <td> 当返回行的所有列都是空时，MyBatis默认返回<tt>null</tt>。 当开启这个设置时，MyBatis会返回一个空实例。 请注意，它也适用于嵌套的结果集 (i.e. collectioin and association)。（从3.4.2开始） </td><br>     <td> true | false </td><br>     <td> false </td><br>    </tr><br>    <tr class="a"><br>     <td> logPrefix </td><br>     <td> 指定 MyBatis 增加到日志名称的前缀。 </td><br>     <td> 任何字符串 </td><br>     <td> Not set </td><br>    </tr><br>    <tr class="b"><br>     <td> logImpl </td><br>     <td> 指定 MyBatis 所用日志的具体实现，未指定时将自动查找。 </td><br>     <td> 查找顺序：SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING </td><br>     <td> Not set </td><br>    </tr><br>    <tr class="a"><br>     <td> proxyFactory </td><br>     <td> 指定 Mybatis 创建具有延迟加载能力的对象所用到的代理工具。 </td><br>     <td> CGLIB | JAVASSIST </td><br>     <td> JAVASSIST (MyBatis 3.3 or above) </td><br>    </tr><br>    <tr class="b"><br>     <td> vfsImpl </td><br>     <td> 指定VFS的实现 </td><br>     <td> 自定义VFS的实现的类全限定名，以逗号分隔。 </td><br>     <td> Not set </td><br>    </tr><br>    <tr class="a"><br>     <td> useActualParamName </td><br>     <td> 允许使用方法签名中的名称作为语句参数名称。 为了使用该特性，你的工程必须采用Java 8编译，并且加上<tt>-parameters</tt>选项。（从3.4.1开始） </td><br>     <td> true | false </td><br>     <td> true </td><br>    </tr><br>    <tr class="b"><br>     <td> configurationFactory </td><br>     <td> 指定一个提供<tt>Configuration</tt>实例的类。 这个被返回的Configuration实例用来加载被反序列化对象的懒加载属性值。 这个类必须包含一个签名方法<tt>static Configuration getConfiguration()</tt>. (从 3.2.3 版本开始) </td><br>     <td> 类型别名或者全类名. </td><br>     <td> Not set </td><br>    </tr><br>   </tbody><br>  </table><br> </body><br></html>

<h3 id="typeAliases类型别名"><a href="#typeAliases类型别名" class="headerlink" title="typeAliases类型别名"></a>typeAliases类型别名</h3><blockquote>
<p>记得我们在***Mapper.xml配置resultMap节点时需要配置type即需要映射的实体类类型，但是项目中一般实体类都在相同的目录下，这样写太过繁杂<br>于是就有了简化的配置就别名配置，例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    &lt;typeAliases&gt;</span><br><span class="line">      &lt;typeAlias alias=<span class="string">"Blog"</span> type=<span class="string">"domain.blog.Blog"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/typeAliases&gt;</span></span><br><span class="line"><span class="regexp">```  </span></span><br><span class="line"><span class="regexp">&gt; 也可以配置包名,Mybatis会自动在包名下搜索需要的java bean 对象  </span></span><br><span class="line"><span class="regexp">```xml</span></span><br><span class="line"><span class="regexp">    &lt;typeAliases&gt;</span></span><br><span class="line"><span class="regexp">      &lt;package name="domain.blog"/</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/typeAliases&gt;</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="typeHandlers类型转换器"><a href="#typeHandlers类型转换器" class="headerlink" title="typeHandlers类型转换器"></a>typeHandlers类型转换器</h3><blockquote>
<p>mybatis在预处理语句中设置参数和从结果集中取出参数时都会使用类型转换器将获取的值以合适的方式转换为java类型。mybatis内置了大部分的类型转换器。<br>这些类型转换器实现了TypeHandler接口，如果我们需要自己实现自定义的类型转换器，可以实现该接口，但是这个接口方法太多，我们一般继承BaseTypeHandler抽象类即可。<br>例如我们实现一个枚举类型的转换器<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HasIndexEnum</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">getIndex</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumTypeHandler</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">HasIndexEnum</span>&gt; <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Map&lt;Integer, T&gt; enumCache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">EnumTypeHandler</span><span class="params">(Class&lt;T&gt; clazz)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!Enum.class.isAssignableFrom(clazz) &amp;&amp; HasIndexEnum.class.isAssignableFrom(clazz)) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"Class shound be enum and implements HasIndexEnum.class!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            T[] constants = clazz.getEnumConstants();</span><br><span class="line">            <span class="keyword">for</span> (T e : constants) &#123;</span><br><span class="line">                enumCache.put(e.getIndex(), e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i, T parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">            ps.setInt(i, parameter.getIndex());</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> T <span class="title">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">            Object value = rs.getObject(columnName);</span><br><span class="line">            <span class="keyword">if</span> (rs.wasNull()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> convertOrException(value);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> T <span class="title">getNullableResult</span><span class="params">(ResultSet rs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">            Object value = rs.getObject(columnIndex);</span><br><span class="line">            <span class="keyword">if</span> (rs.wasNull()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> convertOrException(value);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> T <span class="title">getNullableResult</span><span class="params">(CallableStatement cs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">            Object value = cs.getObject(columnIndex);</span><br><span class="line">            <span class="keyword">if</span> (cs.wasNull()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> convertOrException(value);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">private</span> T <span class="title">convertOrException</span><span class="params">(Object value)</span> </span>&#123;</span><br><span class="line">            T e = <span class="keyword">this</span>.enumCache.get((Integer) value);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Cannot convert "</span> + value);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">```  </span><br><span class="line">&gt; 然后在mybatis-config.xml中配置该转换器</span><br></pre></td></tr></table></figure></p>
</blockquote>
   <!-- mybatis-config.xml -->
<p>   <typehandlers><br>     <typehandler handler="*.*.*.EnumTypeHandler"><br>   </typehandler></typehandlers><br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">### objectFactory对象工厂  </span></span><br><span class="line">&gt; 不怎么常用，略  </span><br><span class="line"></span><br><span class="line"><span class="meta">### plugins插件  </span></span><br><span class="line">&gt; MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：  </span><br><span class="line">&gt; * Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)  </span><br><span class="line">&gt; * ParameterHandler (getParameterObject, setParameters)  </span><br><span class="line">&gt; * ResultSetHandler (handleResultSets, handleOutputParameters)  </span><br><span class="line">&gt; * StatementHandler (prepare, parameterize, batch, update, query)</span><br><span class="line">&gt; 通过 MyBatis 提供的强大机制，使用插件是非常简单的，只需实现 &lt;code&gt;Interceptor&lt;/code&gt; 接口，并指定想要拦截的方法签名即可  </span><br><span class="line">```java</span><br><span class="line">    <span class="comment">// ExamplePlugin.java</span></span><br><span class="line">    @Intercepts(&#123;@Signature(</span><br><span class="line">      type= Executor.class,</span><br><span class="line">      method = <span class="string">"update"</span>,</span><br><span class="line">      args = &#123;MappedStatement.class,<span class="built_in">Object</span>.class&#125;)&#125;)</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExamplePlugin</span> <span class="title">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="built_in">Object</span> intercept(Invocation invocation) throws Throwable &#123;</span><br><span class="line">        <span class="keyword">return</span> invocation.proceed();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="built_in">Object</span> plugin(<span class="built_in">Object</span> target) &#123;</span><br><span class="line">        <span class="keyword">return</span> Plugin.wrap(target, <span class="keyword">this</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> setProperties(Properties properties) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">"org.mybatis.example.ExamplePlugin"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"someProperty"</span> <span class="attr">value</span>=<span class="string">"100"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">```  </span><br><span class="line">&gt; 像一些分页插件，日志插件，分表插件都是基于插件实现的，后面我们会做详细的原理介绍，在此不作过多赘述。  </span><br><span class="line"></span><br><span class="line">### environments 配置环境  </span><br><span class="line">&gt; mybatis与spring整合后，该配置就变得十分简单，在此不做介绍了。  </span><br><span class="line"></span><br><span class="line">### mappers(映射器)</span><br><span class="line">&gt; 所谓的映射器就是指明我们编写的mapper.xml sql文件的位置的，便于mybatis去做关联。  </span><br><span class="line">&gt; 我们可以配置具体的文件，也可以配置整个包路径，同时还支持表达式符号，例如：  </span><br><span class="line">```xml</span><br><span class="line">    <span class="comment">&lt;!-- 使用相对于类路径的资源引用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/builder/AuthorMapper.xml"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/builder/BlogMapper.xml"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/mybatis/builder/PostMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 使用完全限定资源定位符（URL） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">"file:///var/mappers/AuthorMapper.xml"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">"file:///var/mappers/BlogMapper.xml"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">"file:///var/mappers/PostMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"org.mybatis.builder.AuthorMapper"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"org.mybatis.builder.BlogMapper"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"org.mybatis.builder.PostMapper"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 将包内的映射器接口实现全部注册为映射器,要求包名与xml文件的目录名一致 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"org.mybatis.builder"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>到此Mybatis的配置文件就介绍完了，下一节我们开始讨论学习Mybatis 的执行流程和原理</p>
</blockquote>
</div><div class="post-copyright"><blockquote><p>原文作者: LeiLi.Zhang</p><p>原文链接: <a href="https://cnkeep.github.io/2018/06/13/03-mybatis-config的配置介绍/">https://cnkeep.github.io/2018/06/13/03-mybatis-config的配置介绍/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"><a href="/tags/Mybatis/">Mybatis</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2018/06/15/04-01_执行流程解读/" class="pre">01_执行流程解读</a><a href="/2018/06/12/04-pom引入lib目录下jar/" class="next">pom引入lib目录下jar</a></div><div id="comments"><div id="container"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.3"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.3"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.3"></script><script>var gitalk = new Gitalk({
  clientID: '5b6acb94829bddd4a4b2',
  clientSecret: '718d07f690aa6efee404a48e1ffc762276be4d4a',
  repo: 'cnkeep.github.io',
  owner: 'cnkeep',
  admin: ['cnkeep'],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-CN',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis-config-xml配置介绍"><span class="toc-number">1.</span> <span class="toc-text">mybatis-config.xml配置介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#介绍"><span class="toc-number">1.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties属性"><span class="toc-number">1.2.</span> <span class="toc-text">properties属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#注意："><span class="toc-number">1.2.1.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#settings全局属性"><span class="toc-number">1.3.</span> <span class="toc-text">settings全局属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeAliases类型别名"><span class="toc-number">1.4.</span> <span class="toc-text">typeAliases类型别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeHandlers类型转换器"><span class="toc-number">1.5.</span> <span class="toc-text">typeHandlers类型转换器</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/02/05/02-JVM参数配置打印gc日志/">JVM参数配置打印gc日志</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/05/02-jstack命令/">jstack命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/03/01-Jconsole无法连接程序/">Jconsole无法连接程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/02/01-jps命令/">jps命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/03/看懂UML类图/">看懂UML类图</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/14/03-Redis设置开机自启/">Redis设置开机自启</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/13/02-Redis设置访问ip限制/">Redis设置访问ip限制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/13/01-Redis介绍与安装/">Redis介绍与安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/10/04-explain查看执行计划/">explain查看执行计划</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/08/03-02_Mysql执行顺序/">02_Mysql执行顺序</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mybatis/">Mybatis</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/UML/">UML</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bugs/">bugs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">6</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/bugs/" style="font-size: 15px;">bugs</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/others/" style="font-size: 15px;">others</a> <a href="/tags/UML/" style="font-size: 15px;">UML</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://github.com/cnkeep" title="Github" target="_blank">Github</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">LeiLi.Zhang.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>